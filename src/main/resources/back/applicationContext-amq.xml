<?xml version="1.0" encoding="UTF-8"?>
<beans
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:amq="http://activemq.apache.org/schema/core"
  xmlns:jms="http://www.springframework.org/schema/jms"
  xsi:schemaLocation="http://www.springframework.org/schema/jms http://www.springframework.org/schema/jms/spring-jms.xsd
  http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd">
<!-- 
参考文档：
http://www.javacodegeeks.com/2014/02/spring-jms-processing-messages-within-transactions.html?utm_source=tuicool
https://github.com/xpadro/spring-integration/tree/master/jms-tx
http://activemq.apache.org/redelivery-policy.html
http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/jms.html
http://activemq.apache.org/spring-support.html
jms数据持久化
http://obullxl.iteye.com/blog/1114827
失效的消息的处理方法见我的博客
http://01jiangwei01.iteye.com/admin/blogs/2174971
jms数据内容
http://sunny.blog.51cto.com/182601/107507/

了解文档
http://www.360doc.cn/article.aspx?id=53325069
http://wenku.baidu.com/link?url=oZkKhVWaKOOnBu5y44TTiFGceqqDF9mUWoK4gXJ6xxZr0vHR-7IpaK8LwwzQz69jWkUKCymV8CS08X6cXyCwLMZ2oVc3UYISdf8UhMOTCnW
 -->
	<context:component-scan base-package="cn.paypalm.risk.amq.messagelistener" />
	 
 	<!-- 真正可以产生Connection的ConnectionFactory，由对应的 JMS服务厂商提供--> 
 	<!-- 
	 <bean id="connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
        <property name="brokerURL" value="tcp://localhost:61616"/>
        <property name="useAsyncSend" value="true"></property>
    </bean>
     -->
     <amq:connectionFactory id="connectionFactory" brokerURL="tcp://localhost:61616" useAsyncSend="true"/> 
	<bean id="jmsFactory" class="org.apache.activemq.pool.PooledConnectionFactory" destroy-method="stop">    
        <property name="connectionFactory" ref="connectionFactory"/>    
        <property name="maxConnections" value="100"/>    
    </bean>  
    
    <amq:queue id="jms_reqQueue" physicalName="reqQueue" />
    <amq:queue id="jms_resQueue" physicalName="resQueue" />
    <amq:queue id="jms_bindCardQueue" physicalName="bindCardQueue" />
    <amq:queue id="jms_heartBeatQueue" physicalName="heartBeatQueue" />
   
	  <!-- concurrency指定最多可并发开启10个监听器 -->  
	 <jms:listener-container destination-type="queue" container-type="default" 
	 connection-factory="jmsFactory" 
	 concurrency="10"	
	 acknowledge="auto">
		<jms:listener destination="heartBeatQueue" ref="heartBeatQueueMessageListener"/>
		<jms:listener destination="reqQueue" ref="reqQueueMessageListener"/>
		<jms:listener destination="resQueue" ref="resQueueMessageListener"/>
		<jms:listener destination="bindCardQueue" ref="bindCardQueueMessageListener"/>
	</jms:listener-container>
</beans>